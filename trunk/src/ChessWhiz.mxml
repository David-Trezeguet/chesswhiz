<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml"
	xmlns:cwui="ui.*"
	layout="vertical" backgroundGradientColors="[#000000, #ffffff]"
	initialize="init()"
	applicationComplete="initComplete()"
	viewSourceURL="srcview/index.html">

	<mx:Script>	
		<![CDATA[
	
	    private function init() : void
	    {
	    	var locales:Array = [ "en_US" ];  // Default chain.
	
	    	// Load the locale.
	    	var urlParams:Array = Util.readQueryString();
	    	var param:String = urlParams["locale"];
			if (param != null && param != "" && param != "en_US") {
				locales.unshift(param); // Add at the beginning.
			}
			trace("Set locale-chain = [" + locales + "]");
			resourceManager.localeChain = locales;
		}
	
	    private function initComplete() : void
	    {
			var chessApp:ChessApp = new ChessApp(topControlBar, mainWindow);
			Global.vars.app = chessApp;  // For global references.
			chessApp.startApp();
		}
	
	]]>
	</mx:Script>

	<mx:Metadata>
		[ResourceBundle ("localization")]
	</mx:Metadata>

    <cwui:TopControlBar id="topControlBar" dock="true">
    </cwui:TopControlBar>
        
	<mx:Canvas id="mainWindow" >
	</mx:Canvas>

</mx:Application>
